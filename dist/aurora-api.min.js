!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AuroraAPI=t():e.AuroraAPI=t()}(self,(function(){return(()=>{var e={792:(e,t,o)=>{var n=null;"undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof MozWebSocket?n=MozWebSocket:void 0!==o.g?n=o.g.WebSocket||o.g.MozWebSocket:"undefined"!=typeof window?n=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(n=self.WebSocket||self.MozWebSocket),e.exports=n}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,o),s.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";o.d(n,{AuroraAPI:()=>l});var e,t=o(792),r=new Uint8Array(16);function s(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(r)}const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,c=function(e){return"string"==typeof e&&i.test(e)};for(var d=[],u=0;u<256;++u)d.push((u+256).toString(16).substr(1));const a=function(e,t,o){var n=(e=e||{}).random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){o=o||0;for(var r=0;r<16;++r)t[o+r]=n[r];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase();if(!c(o))throw TypeError("Stringified UUID is invalid");return o}(n)};class f{constructor(){this.listeners=new Map}addListener(e,t){this.listeners.set(e,t)}emit(e){void 0!==e.uuid&&this.listeners.has(e.uuid)?(this.listeners.get(e.uuid)(e),this.listeners.delete(e.uuid)):void 0!==e.code?console.error(e):console.dir(e)}}class l{constructor(e){this._messageEmitter=new f,this._ready=()=>{},this._socket=new t(e),this._socket.onclose=e=>this.onClose(e),this._socket.onerror=e=>this.onError(e),this._socket.onmessage=e=>this.onMessage(e),this._socket.onopen=e=>{this.onOpen(e),this._ready()}}close(e,t){this._socket.close(e,t)}hasConnected(){return this._socket.readyState===this._socket.OPEN}ready(){return e=this,t=void 0,n=function*(){return!!this.hasConnected()||(yield new Promise((e=>{this._ready=()=>{e(!0)}})))},new((o=void 0)||(o=Promise))((function(r,s){function i(e){try{d(n.next(e))}catch(e){s(e)}}function c(e){try{d(n.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}d((n=n.apply(e,t||[])).next())}));var e,t,o,n}send(e,t={},o){if(!this._socket)return console.error("WebSocket not connected");const n={type:e,uuid:a(),data:t};if(this._socket.send(JSON.stringify(n)),void 0===o)return new Promise(((e,t)=>{this._messageEmitter.addListener(n.uuid,(o=>{void 0!==o.code?t(o):e(o)}))}));this._messageEmitter.addListener(n.uuid,(e=>{void 0!==e.code?o(e):o(null,e)}))}onOpen(e){console.log("Connection established")}onClose(e){if(e.wasClean)return console.log("Connection closed");1006===e.code?console.error("Break connection"):(console.error("Unknown error"),console.dir(e))}onMessage(e){this._messageEmitter.emit(JSON.parse(e.data))}onError(e){console.error("WebSocket error observed:",e)}}})(),n.AuroraAPI})()}));
//# sourceMappingURL=aurora-api.min.js.map