{
  "version": 3,
  "sources": ["../node_modules/ws/lib/stream.js", "../node_modules/ws/lib/constants.js", "../node_modules/node-gyp-build/index.js", "../node_modules/bufferutil/fallback.js", "../node_modules/bufferutil/index.js", "../node_modules/ws/lib/buffer-util.js", "../node_modules/ws/lib/limiter.js", "../node_modules/ws/lib/permessage-deflate.js", "../node_modules/utf-8-validate/fallback.js", "../node_modules/utf-8-validate/index.js", "../node_modules/ws/lib/validation.js", "../node_modules/ws/lib/receiver.js", "../node_modules/ws/lib/sender.js", "../node_modules/ws/lib/event-target.js", "../node_modules/ws/lib/extension.js", "../node_modules/ws/lib/websocket.js", "../node_modules/ws/lib/subprotocol.js", "../node_modules/ws/lib/websocket-server.js", "../node_modules/uuid/dist/rng.js", "../node_modules/uuid/dist/regex.js", "../node_modules/uuid/dist/validate.js", "../node_modules/uuid/dist/stringify.js", "../node_modules/uuid/dist/v1.js", "../node_modules/uuid/dist/parse.js", "../node_modules/uuid/dist/v35.js", "../node_modules/uuid/dist/md5.js", "../node_modules/uuid/dist/v3.js", "../node_modules/uuid/dist/v4.js", "../node_modules/uuid/dist/sha1.js", "../node_modules/uuid/dist/v5.js", "../node_modules/uuid/dist/nil.js", "../node_modules/uuid/dist/version.js", "../node_modules/uuid/dist/index.js", "../src/classes/APIError.ts", "../src/classes/AuroraAPI.ts", "../node_modules/ws/wrapper.mjs", "../node_modules/modern-isomorphic-ws/index.js", "../node_modules/uuid/wrapper.mjs", "../src/classes/MessageEmitter.ts", "../src/classes/AuroraAPISocket.ts"],
  "sourcesContent": ["'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n", "'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n", "var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : (isNwjs() ? 'node-webkit' : 'node')\n\nvar arch = os.arch()\nvar platform = os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.path(dir))\n}\n\nload.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    process.versions.electron ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple)\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0]\n    if (!tuple) return\n\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', tuple.name)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTuple (name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-')\n  if (arr.length !== 2) return\n\n  var platform = arr[0]\n  var architectures = arr[1].split('+')\n\n  if (!platform) return\n  if (!architectures.length) return\n  if (!architectures.every(Boolean)) return\n\n  return { name, platform, architectures }\n}\n\nfunction matchTuple (platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false\n    if (tuple.platform !== platform) return false\n    return tuple.architectures.includes(arch)\n  }\n}\n\nfunction compareTuples (a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isNwjs () {\n  return !!(process.versions && process.versions.nw)\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\nload.parseTuple = parseTuple\nload.matchTuple = matchTuple\nload.compareTuples = compareTuples\n", "'use strict';\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nconst mask = (source, mask, output, offset, length) => {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n};\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nconst unmask = (buffer, mask) => {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n};\n\nmodule.exports = { mask, unmask };\n", "'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n", "'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n", "'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n", "'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n", "'use strict';\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0x00) {  // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {  // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0  // overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {  // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80 ||  // overlong\n        buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0  // surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {  // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80 ||  // overlong\n        buf[i] === 0xf4 && buf[i + 1] > 0x8f || buf[i] > 0xf4  // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = isValidUTF8;\n", "'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n", "'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ntry {\n  const isValidUTF8 = require('utf-8-validate');\n\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8(buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    },\n    tokenChars\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8: _isValidUTF8,\n    tokenChars\n  };\n}\n", "'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data, true);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf, false);\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else if (data.length === 1) {\n        return error(\n          RangeError,\n          'invalid payload length 1',\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = data.slice(2);\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        randomFillSync(mask, 0, 4);\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        [kByteLength]: byteLength,\n        fin: options.fin,\n        generateMask: this._generateMask,\n        mask: options.mask,\n        maskBuffer: this._maskBuffer,\n        opcode,\n        readOnly,\n        rsv1\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n      } else {\n        this.dispatch(data, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(data, {\n          [kByteLength]: byteLength,\n          fin: options.fin,\n          generateMask: this._generateMask,\n          mask: options.mask,\n          maskBuffer: this._maskBuffer,\n          opcode,\n          readOnly,\n          rsv1: false\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const params = this._queue[i];\n          const callback = params[params.length - 1];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n", "'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options = {}) {\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = listener;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n", "'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst closeTimeout = 30 * 1000;\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    this._sender = new Sender(socket, this._extensions, options.generateMask);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n\n    websocket._url = address;\n  }\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n  let invalidURLMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isUnixSocket) {\n    invalidURLMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", or \"ws+unix:\"';\n  } else if (isUnixSocket && !parsedUrl.pathname) {\n    invalidURLMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidURLMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidURLMessage) {\n    const err = new SyntaxError(invalidURLMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalHost = parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (\n      websocket.listenerCount('redirect') === 0 &&\n      parsedUrl.host !== websocket._originalHost\n    ) {\n      //\n      // Match curl 7.77.0 behavior and drop the following headers. These\n      // headers are also dropped when following a redirect to a subdomain.\n      //\n      delete opts.headers.authorization;\n      delete opts.headers.cookie;\n      delete opts.headers.host;\n      opts.auth = undefined;\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  req.end();\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n", "'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key']\n        : false;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (\n      req.method !== 'GET' ||\n      req.headers.upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = rng;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\n\nlet poolPtr = rnds8Pool.length;\n\nfunction rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    _crypto.default.randomFillSync(rnds8Pool);\n\n    poolPtr = 0;\n  }\n\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regex = _interopRequireDefault(require(\"./regex.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && _regex.default.test(uuid);\n}\n\nvar _default = validate;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  const uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!(0, _validate.default)(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nvar _default = stringify;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _rng = _interopRequireDefault(require(\"./rng.js\"));\n\nvar _stringify = _interopRequireDefault(require(\"./stringify.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\nlet _nodeId;\n\nlet _clockseq; // Previous uuid creation time\n\n\nlet _lastMSecs = 0;\nlet _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node || _nodeId;\n  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || _rng.default)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || (0, _stringify.default)(b);\n}\n\nvar _default = v1;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction parse(uuid) {\n  if (!(0, _validate.default)(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nvar _default = parse;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\nexports.URL = exports.DNS = void 0;\n\nvar _stringify = _interopRequireDefault(require(\"./stringify.js\"));\n\nvar _parse = _interopRequireDefault(require(\"./parse.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nconst DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexports.DNS = DNS;\nconst URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexports.URL = URL;\n\nfunction _default(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = (0, _parse.default)(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return (0, _stringify.default)(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction md5(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return _crypto.default.createHash('md5').update(bytes).digest();\n}\n\nvar _default = md5;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _v = _interopRequireDefault(require(\"./v35.js\"));\n\nvar _md = _interopRequireDefault(require(\"./md5.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst v3 = (0, _v.default)('v3', 0x30, _md.default);\nvar _default = v3;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _rng = _interopRequireDefault(require(\"./rng.js\"));\n\nvar _stringify = _interopRequireDefault(require(\"./stringify.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n\n  const rnds = options.random || (options.rng || _rng.default)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return (0, _stringify.default)(rnds);\n}\n\nvar _default = v4;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction sha1(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return _crypto.default.createHash('sha1').update(bytes).digest();\n}\n\nvar _default = sha1;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _v = _interopRequireDefault(require(\"./v35.js\"));\n\nvar _sha = _interopRequireDefault(require(\"./sha1.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst v5 = (0, _v.default)('v5', 0x50, _sha.default);\nvar _default = v5;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = '00000000-0000-0000-0000-000000000000';\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction version(uuid) {\n  if (!(0, _validate.default)(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nvar _default = version;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"v1\", {\n  enumerable: true,\n  get: function () {\n    return _v.default;\n  }\n});\nObject.defineProperty(exports, \"v3\", {\n  enumerable: true,\n  get: function () {\n    return _v2.default;\n  }\n});\nObject.defineProperty(exports, \"v4\", {\n  enumerable: true,\n  get: function () {\n    return _v3.default;\n  }\n});\nObject.defineProperty(exports, \"v5\", {\n  enumerable: true,\n  get: function () {\n    return _v4.default;\n  }\n});\nObject.defineProperty(exports, \"NIL\", {\n  enumerable: true,\n  get: function () {\n    return _nil.default;\n  }\n});\nObject.defineProperty(exports, \"version\", {\n  enumerable: true,\n  get: function () {\n    return _version.default;\n  }\n});\nObject.defineProperty(exports, \"validate\", {\n  enumerable: true,\n  get: function () {\n    return _validate.default;\n  }\n});\nObject.defineProperty(exports, \"stringify\", {\n  enumerable: true,\n  get: function () {\n    return _stringify.default;\n  }\n});\nObject.defineProperty(exports, \"parse\", {\n  enumerable: true,\n  get: function () {\n    return _parse.default;\n  }\n});\n\nvar _v = _interopRequireDefault(require(\"./v1.js\"));\n\nvar _v2 = _interopRequireDefault(require(\"./v3.js\"));\n\nvar _v3 = _interopRequireDefault(require(\"./v4.js\"));\n\nvar _v4 = _interopRequireDefault(require(\"./v5.js\"));\n\nvar _nil = _interopRequireDefault(require(\"./nil.js\"));\n\nvar _version = _interopRequireDefault(require(\"./version.js\"));\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nvar _stringify = _interopRequireDefault(require(\"./stringify.js\"));\n\nvar _parse = _interopRequireDefault(require(\"./parse.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }", "export class APIError extends Error {\r\n    private code: number\r\n\r\n    constructor(code?: number, message?: string) {\r\n        super(message || \"Unknown response error\")\r\n        this.code = code || 0\r\n        this.name = this.constructor.name\r\n    }\r\n\r\n    toObject() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n        }\r\n    }\r\n\r\n    // \u0418\u043C\u0435\u0435\u0442 \u043B\u0438 \u0441\u043C\u044B\u0441\u043B?\r\n    toJson() {\r\n        return JSON.stringify(this.toObject())\r\n    }\r\n}\r\n", "import { ResponseData } from \"../types/Response\"\r\nimport { AuthResponseData } from \"../types/response/AuthResponse\"\r\nimport { ProfileResponseData } from \"../types/response/ProfileResponse\"\r\nimport { ServersResponseData } from \"../types/response/ServersResponse\"\r\nimport { UpdatesResponseData } from \"../types/response/UpdatesResponse\"\r\nimport { APIError } from \"./APIError\"\r\nimport { AuroraAPISocket, ResponseError } from \"..\"\r\n\r\nexport class AuroraAPI {\r\n    apiInstance: AuroraAPISocket\r\n\r\n    constructor(url: string) {\r\n        this.apiInstance = new AuroraAPISocket(url)\r\n    }\r\n\r\n    public async auth(login: string, password: string) {\r\n        return <AuthResponseData>await this.getRequest(\"auth\", { login, password })\r\n    }\r\n\r\n    public async getServers() {\r\n        return <ServersResponseData>await this.getRequest(\"servers\")\r\n    }\r\n\r\n    public async getProfile(uuid: string) {\r\n        return <ProfileResponseData>await this.getRequest(\"profile\", { uuid })\r\n    }\r\n\r\n    public async getUpdates(dir: string) {\r\n        return <UpdatesResponseData>await this.getRequest(\"updates\", { dir })\r\n    }\r\n\r\n    private async getRequest<T extends ResponseData>(method: string, payload?: any): Promise<T> {\r\n        try {\r\n            const { data } = await this.apiInstance.send(method, payload)\r\n            return <T>data\r\n        } catch (error) {\r\n            const { code, message } = <ResponseError>error\r\n            throw new APIError(code, message)\r\n        }\r\n    }\r\n}\r\n", "import createWebSocketStream from './lib/stream.js';\nimport Receiver from './lib/receiver.js';\nimport Sender from './lib/sender.js';\nimport WebSocket from './lib/websocket.js';\nimport WebSocketServer from './lib/websocket-server.js';\n\nexport { createWebSocketStream, Receiver, Sender, WebSocket, WebSocketServer };\nexport default WebSocket;\n", "import WebSocket from \"ws\";\nexport default WebSocket;\n", "import uuid from './dist/index.js';\nexport const v1 = uuid.v1;\nexport const v3 = uuid.v3;\nexport const v4 = uuid.v4;\nexport const v5 = uuid.v5;\nexport const NIL = uuid.NIL;\nexport const version = uuid.version;\nexport const validate = uuid.validate;\nexport const stringify = uuid.stringify;\nexport const parse = uuid.parse;\n", "import { Response, ResponseError, ResponseEvent } from \"../types/Response\"\n\nexport default class MessageEmitter {\n    listeners: Map<string, ResponseEvent> = new Map()\n\n    public addListener(uuid: string, listener: ResponseEvent) {\n        this.listeners.set(uuid, listener)\n    }\n\n    public emit(data: Response | ResponseError) {\n        if (data.uuid === undefined) return console.error(\"[AuroraAPI] Broken request: \", data)\n        if (!this.listeners.has(data.uuid)) return console.error(\"[AuroraAPI] Unhandled request: \", data)\n\n        this.listeners.get(data.uuid)!(data)\n        this.listeners.delete(data.uuid)\n    }\n}\n", "import WebSocket from \"modern-isomorphic-ws\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\n\r\nimport { Response, ResponseError } from \"../types/Response\"\r\nimport { APIError } from \"./APIError\"\r\nimport MessageEmitter from \"./MessageEmitter\"\r\n\r\n// \u041C\u043E\u0436\u043D\u043E \u0440\u0430\u0441\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u0438\u0432\u0430\u0442\u043D\u044B\u0445 \u043F\u043E\u043B\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 #\r\n// https://github.com/tc39/proposal-class-fields/blob/master/PRIVATE_SYNTAX_FAQ.md\r\n// \u0423 \u0432\u0435\u0431\u043F\u0430\u043A\u0430 \u0435\u0441\u0442\u044C \u0441\u0432\u043E\u0438 \u043F\u0440\u0438\u043A\u043E\u043B\u044B \u043D\u0430 \u044D\u0442\u043E\u0442 \u0441\u0447\u0451\u0442, \u043C\u0431 \u0437\u0430\u043C\u0435\u043D\u0438\u0442\u044C \u0435\u0433\u043E \u043A \u0447\u0451\u0440\u0442\u0443?))\r\n// + logger settings\r\n\r\nexport class AuroraAPISocket {\r\n    private _messageEmitter = new MessageEmitter()\r\n    private _socket: WebSocket\r\n    private _ready = () => {\r\n        console.error(\r\n            \"[AuroraAPI] If you see this message, tell the developer of the `aurora-api` library that he is the creator of the crutches.\"\r\n        )\r\n    }\r\n\r\n    constructor(\r\n        url: string,\r\n        events?: {\r\n            onClose?: (event: WebSocket.CloseEvent | CloseEvent) => void\r\n            onError?: (event: WebSocket.ErrorEvent | Event) => void\r\n            onMessage?: (event: WebSocket.MessageEvent | MessageEvent) => void\r\n            onOpen?: (event: WebSocket.Event | Event) => void\r\n        }\r\n    ) {\r\n        this._socket = new WebSocket(url)\r\n        this._socket.onclose = (event) => this.onClose(event, events?.onClose)\r\n        this._socket.onerror = (event) => this.onError(event, events?.onError)\r\n        this._socket.onmessage = (event) => this.onMessage(event, events?.onMessage)\r\n        this._socket.onopen = (event) => this.onOpen(event, events?.onOpen)\r\n    }\r\n\r\n    // reopen?\r\n    public close(code?: number, data?: string): void {\r\n        this._socket.close(code, data)\r\n    }\r\n\r\n    public hasConnected(): boolean {\r\n        return this._socket.readyState === this._socket.OPEN\r\n    }\r\n\r\n    public async ready() {\r\n        if (this.hasConnected()) return true\r\n        return await new Promise((resolve) => {\r\n            this._ready = () => {\r\n                resolve(true)\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0437\u0430\u043F\u0440\u043E\u0441\u0430\r\n     * @param type \u0422\u0438\u043F \u0440\u0435\u043A\u0432\u0435\u0441\u0442\u0430\r\n     * @param data \u0414\u0430\u043D\u043D\u044B\u0435\r\n     * @throws {ResponseError}\r\n     */\r\n    public send(type: string, data: object = {}): Promise<Response> {\r\n        if (!this.hasConnected()) throw new APIError(90, \"[AuroraAPI] WebSocket not connected\")\r\n\r\n        const uuid = uuidv4()\r\n        this._socket.send(JSON.stringify({ type, uuid, data }))\r\n\r\n        return new Promise((resolve, reject) => {\r\n            this._messageEmitter.addListener(uuid, (data: Response | ResponseError): void => {\r\n                if ((<ResponseError>data).code !== undefined) reject(data)\r\n                else resolve(<Response>data)\r\n            })\r\n        })\r\n    }\r\n\r\n    /* Events */\r\n\r\n    private onOpen(event: WebSocket.Event | Event, eventListener?: (event: WebSocket.Event | Event) => void): void {\r\n        this._ready()\r\n        console.log(\"[AuroraAPI] Connection established\")\r\n        if (eventListener) eventListener(event)\r\n    }\r\n\r\n    private onClose(\r\n        event: WebSocket.CloseEvent | CloseEvent,\r\n        eventListener?: (event: WebSocket.CloseEvent | CloseEvent) => void\r\n    ) {\r\n        if (event.wasClean) return console.log(\"[AuroraAPI] Connection closed\")\r\n        if (event.code === 1006) console.error(\"[AuroraAPI] Break connection\")\r\n        else console.error(\"[AuroraAPI] Unknown error\", event)\r\n        if (eventListener) eventListener(event)\r\n    }\r\n\r\n    private onMessage(\r\n        event: WebSocket.MessageEvent | MessageEvent,\r\n        eventListener?: (event: WebSocket.MessageEvent | MessageEvent) => void\r\n    ) {\r\n        this._messageEmitter.emit(JSON.parse(event.data))\r\n        if (eventListener) eventListener(event)\r\n    }\r\n\r\n    private onError(\r\n        event: WebSocket.ErrorEvent | Event,\r\n        eventListener?: (event: WebSocket.ErrorEvent | Event) => void\r\n    ) {\r\n        console.error(\"[AuroraAPI] WebSocket error observed:\", event)\r\n        if (eventListener) eventListener(event)\r\n    }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
